{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/asha/Documents/miniboss/node_modules/@react-native-mapbox-gl/maps/javascript/components/annotations/Annotation.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport PropTypes from 'prop-types';\nimport SymbolLayer from \"../SymbolLayer\";\nimport Animated from \"../../utils/animated/Animated\";\nimport AnimatedMapPoint from \"../../utils/animated/AnimatedPoint\";\n\nvar Annotation = function (_React$Component) {\n  _inherits(Annotation, _React$Component);\n\n  var _super = _createSuper(Annotation);\n\n  function Annotation(props) {\n    var _this;\n\n    _classCallCheck(this, Annotation);\n\n    _this = _super.call(this, props);\n\n    var shape = _this._getShapeFromProps(props);\n\n    _this.state = {\n      shape: props.animated ? new AnimatedMapPoint(shape) : shape\n    };\n    _this.onPress = _this.onPress.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Annotation, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!Array.isArray(this.props.coordinates)) {\n        this.setState({\n          shape: null\n        });\n        return;\n      }\n\n      var hasCoordChanged = prevProps.coordinates[0] !== this.props.coordinates[0] || prevProps.coordinates[1] !== this.props.coordinates[1];\n\n      if (!hasCoordChanged) {\n        return;\n      }\n\n      if (this.props.animated && this.state.shape) {\n        this.state.shape.stopAnimation();\n        this.state.shape.timing({\n          coordinates: this.props.coordinates,\n          easing: this.props.animationEasingFunction,\n          duration: this.props.animationDuration\n        }).start();\n      } else if (!this.state.shape || !this.props.animated) {\n        var shape = this._getShapeFromProps(this.props);\n\n        this.setState({\n          shape: this.props.animated ? new AnimatedMapPoint(shape) : shape\n        });\n      }\n    }\n  }, {\n    key: \"onPress\",\n    value: function onPress() {\n      if (this.props.onPress) {\n        this.props.onPress();\n      }\n    }\n  }, {\n    key: \"_getShapeFromProps\",\n    value: function _getShapeFromProps() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var lng = props.coordinates[0] || 0;\n      var lat = props.coordinates[1] || 0;\n      return {\n        type: 'Point',\n        coordinates: [lng, lat]\n      };\n    }\n  }, {\n    key: \"symbolStyle\",\n    get: function get() {\n      if (!this.props.icon) {\n        return undefined;\n      }\n\n      return _extends({}, this.props.style, {\n        iconImage: this.props.icon\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.props.coordinates) {\n        return null;\n      }\n\n      return React.createElement(Animated.ShapeSource, {\n        id: this.props.id,\n        ref: \"source\",\n        onPress: this.onPress,\n        shape: this.state.shape,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 7\n        }\n      }, this.symbolStyle && React.createElement(SymbolLayer, {\n        id: this.props.id + \"-symbol\",\n        style: this.symbolStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      }), this.props.children);\n    }\n  }]);\n\n  return Annotation;\n}(React.Component);\n\nAnnotation.propTypes = {\n  id: PropTypes.string.isRequired,\n  animated: PropTypes.bool,\n  animationDuration: PropTypes.number,\n  animationEasingFunction: PropTypes.func,\n  coordinates: PropTypes.arrayOf(PropTypes.number),\n  onPress: PropTypes.func,\n  children: PropTypes.any,\n  style: PropTypes.any,\n  icon: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.object])\n};\nAnnotation.defaultProps = {\n  animated: false,\n  animationDuration: 1000,\n  animationEasingFunction: Easing.linear\n};\nexport default Annotation;","map":{"version":3,"sources":["/Users/asha/Documents/miniboss/node_modules/@react-native-mapbox-gl/maps/javascript/components/annotations/Annotation.js"],"names":["React","PropTypes","SymbolLayer","Animated","AnimatedMapPoint","Annotation","props","shape","_getShapeFromProps","state","animated","onPress","bind","prevProps","Array","isArray","coordinates","setState","hasCoordChanged","stopAnimation","timing","easing","animationEasingFunction","duration","animationDuration","start","lng","lat","type","icon","undefined","style","iconImage","id","symbolStyle","children","Component","propTypes","string","isRequired","bool","number","func","arrayOf","any","oneOfType","object","defaultProps","Easing","linear"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Easing} from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport SymbolLayer from '../SymbolLayer';\nimport Animated from '../../utils/animated/Animated';\nimport AnimatedMapPoint from '../../utils/animated/AnimatedPoint';\n\nclass Annotation extends React.Component {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    animated: PropTypes.bool,\n    animationDuration: PropTypes.number,\n    animationEasingFunction: PropTypes.func,\n    coordinates: PropTypes.arrayOf(PropTypes.number),\n    onPress: PropTypes.func,\n    children: PropTypes.any,\n    style: PropTypes.any,\n    icon: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n      PropTypes.object,\n    ]),\n  };\n\n  static defaultProps = {\n    animated: false,\n    animationDuration: 1000,\n    animationEasingFunction: Easing.linear,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const shape = this._getShapeFromProps(props);\n\n    this.state = {\n      shape: props.animated ? new AnimatedMapPoint(shape) : shape,\n    };\n\n    this.onPress = this.onPress.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (!Array.isArray(this.props.coordinates)) {\n      this.setState({shape: null});\n      return;\n    }\n\n    const hasCoordChanged =\n      prevProps.coordinates[0] !== this.props.coordinates[0] ||\n      prevProps.coordinates[1] !== this.props.coordinates[1];\n\n    if (!hasCoordChanged) {\n      return;\n    }\n\n    if (this.props.animated && this.state.shape) {\n      // flush current animations\n      this.state.shape.stopAnimation();\n\n      this.state.shape\n        .timing({\n          coordinates: this.props.coordinates,\n          easing: this.props.animationEasingFunction,\n          duration: this.props.animationDuration,\n        })\n        .start();\n    } else if (!this.state.shape || !this.props.animated) {\n      const shape = this._getShapeFromProps(this.props);\n\n      this.setState({\n        shape: this.props.animated ? new AnimatedMapPoint(shape) : shape,\n      });\n    }\n  }\n\n  onPress() {\n    if (this.props.onPress) {\n      this.props.onPress();\n    }\n  }\n\n  _getShapeFromProps(props = {}) {\n    const lng = props.coordinates[0] || 0;\n    const lat = props.coordinates[1] || 0;\n    return {type: 'Point', coordinates: [lng, lat]};\n  }\n\n  get symbolStyle() {\n    if (!this.props.icon) {\n      return undefined;\n    }\n    return Object.assign({}, this.props.style, {\n      iconImage: this.props.icon,\n    });\n  }\n\n  render() {\n    if (!this.props.coordinates) {\n      return null;\n    }\n\n    return (\n      <Animated.ShapeSource\n        id={this.props.id}\n        ref=\"source\"\n        onPress={this.onPress}\n        shape={this.state.shape}\n      >\n        {this.symbolStyle && (\n          <SymbolLayer\n            id={`${this.props.id}-symbol`}\n            style={this.symbolStyle}\n          />\n        )}\n        {this.props.children}\n      </Animated.ShapeSource>\n    );\n  }\n}\n\nexport default Annotation;\n"]},"metadata":{},"sourceType":"module"}